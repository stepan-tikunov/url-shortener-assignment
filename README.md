# Тестовое задание для бэкенд-разработчика

## Текст задания

>Требуется разработать сокращатель ссылок. Пользователь вводит ссылку или несколько сразу, в ответ получает сокращённую и уникальную в пределах сервиса короткую ссылку. 
>
>По каждой ссылке необходимо также хранить статистику переходов и гео информацию, а после отображать её по некой секретной ссылке (вместо кабинета).
>
>Дизайн — любой на усмотрение, или его отсутствие. Фронденд и бекенд — максимально легковесные и чистые решения. Пакеты, ООП, возможность масшабировать проект. База данных — на усмотрение.

## Приложение

Ссылка на приложение: [cringouli.cc](https://cringouli.cc).

## Использованные подходы

При выполнении задания использовались следующие технологии и подходы:
- Бэкенд-часть приложения написана на PHP;
- Используется [Composer](https://getcomposer.org/doc/00-intro.md) для подключения внешних библиотек;
- Фронтенд-часть приложения написана на чистых HTML/CSS/JS;
- Данные о ссылках и переходах сохраняются в базу данных SQLite;
- Генерация идентификаторов для ссылок выполняется средствами БД;
- Кодирование ссылок в уникальную строку из 7 латинских цифр и букв осуществляется посредством [FPE](https://en.wikipedia.org/wiki/Format-preserving_encryption) и [шифра Фейстеля](https://en.wikipedia.org/wiki/Feistel_cipher), для этого была использована библиотека [katoni/php-ffx](https://github.com/katoni/php-ffx);
- Определение местоположения по IP-адресу осуществляется с использованием базы данных городов [MaxMind GeoIP2](https://www.maxmind.com/en/geoip2-city) и [библиотеки PHP](https://github.com/maxmind/GeoIP2-php) для работы с ней.

## Запуск

Перед запуском необходимо:
1. Отредактировать файл `php.ini` (местоположение файла можно посмотреть через команду `php --ini`), включив необходимые расширения:
   ```ini
   extension=gmp
   extension=curl
   extension=sqlite3
   ```
1. Установить зависимости через [Composer](https://getcomposer.org/doc/00-intro.md):
   ```bash
   composer install
   ```
1. Создать файл `app.ini`:
   ```bash
   cp app.ini.example app.ini
   ```
1. Задать в этом файле ключ для генерации идентификаторов, отредактировав свойство `ffx_key`;
1. Создать пустую базу данных для ссылок в директории `database`:
   ```bash
   sqlite3 database/urls.sqlite < database/create.sql
   ```
1. Скачать базу данных [GeoIP2 City](https://www.maxmind.com/en/geoip2-city).

Для запуска тестового сервера нужно запустить команду:
```bash
php -S localhost:8080 src/index.php
```

## Автор
Степан Тикунов

email: stepan.tikunov@niuitmo.ru

2023
